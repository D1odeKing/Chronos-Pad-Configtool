{
    "version": "2.0",
    "hardware": {
        "rows": 5,
        "cols": 4,
        "col_pins": [
            "board.GP0",
            "board.GP1",
            "board.GP2",
            "board.GP3"
        ],
        "row_pins": [
            "board.GP8",
            "board.GP7",
            "board.GP6",
            "board.GP5",
            "board.GP4"
        ],
        "diode_orientation": "COL2ROW"
    },
    "keymap": {
        "layers": [
            [
                [
                    "KC.NO",
                    "KC.NO",
                    "KC.NO",
                    "KC.NO"
                ],
                [
                    "KC.NO",
                    "KC.NO",
                    "KC.NO",
                    "KC.NO"
                ],
                [
                    "KC.NO",
                    "KC.NO",
                    "KC.NO",
                    "KC.NO"
                ],
                [
                    "KC.NO",
                    "KC.NO",
                    "KC.NO",
                    "KC.NO"
                ],
                [
                    "KC.TG(1)",
                    "KC.TG(2)",
                    "KC.TG(3)",
                    "KC.B"
                ]
            ],
            [
                [
                    "KC.NO",
                    "KC.NO",
                    "KC.NO",
                    "KC.NO"
                ],
                [
                    "KC.NO",
                    "KC.NO",
                    "KC.NO",
                    "KC.NO"
                ],
                [
                    "KC.NO",
                    "KC.NO",
                    "KC.NO",
                    "KC.NO"
                ],
                [
                    "KC.NO",
                    "KC.NO",
                    "KC.NO",
                    "KC.NO"
                ],
                [
                    "KC.TG(1)",
                    "KC.TG(2)",
                    "KC.TG(3)",
                    "KC.A"
                ]
            ],
            [
                [
                    "KC.NO",
                    "KC.NO",
                    "KC.NO",
                    "KC.NO"
                ],
                [
                    "KC.NO",
                    "KC.NO",
                    "KC.NO",
                    "KC.NO"
                ],
                [
                    "KC.NO",
                    "KC.NO",
                    "KC.NO",
                    "KC.NO"
                ],
                [
                    "KC.NO",
                    "KC.NO",
                    "KC.F",
                    "KC.NO"
                ],
                [
                    "KC.NO",
                    "KC.NO",
                    "KC.NO",
                    "KC.NO"
                ]
            ],
            [
                [
                    "KC.NO",
                    "KC.NO",
                    "KC.NO",
                    "KC.NO"
                ],
                [
                    "KC.NO",
                    "KC.NO",
                    "KC.NO",
                    "KC.NO"
                ],
                [
                    "KC.NO",
                    "KC.NO",
                    "KC.NO",
                    "KC.NO"
                ],
                [
                    "KC.NO",
                    "KC.NO",
                    "KC.NO",
                    "KC.NO"
                ],
                [
                    "KC.NO",
                    "KC.NO",
                    "KC.M",
                    "KC.NO"
                ]
            ],
            [
                [
                    "KC.NO",
                    "KC.NO",
                    "KC.NO",
                    "KC.NO"
                ],
                [
                    "KC.NO",
                    "KC.NO",
                    "KC.NO",
                    "KC.NO"
                ],
                [
                    "KC.NO",
                    "KC.NO",
                    "KC.NO",
                    "KC.NO"
                ],
                [
                    "KC.NO",
                    "KC.NO",
                    "KC.NO",
                    "KC.NO"
                ],
                [
                    "KC.E",
                    "KC.NO",
                    "KC.NO",
                    "KC.NO"
                ]
            ],
            [
                [
                    "KC.NO",
                    "KC.NO",
                    "KC.NO",
                    "KC.NO"
                ],
                [
                    "KC.NO",
                    "KC.NO",
                    "KC.NO",
                    "KC.NO"
                ],
                [
                    "KC.NO",
                    "KC.NO",
                    "KC.NO",
                    "KC.NO"
                ],
                [
                    "KC.NO",
                    "KC.NO",
                    "KC.NO",
                    "KC.NO"
                ],
                [
                    "KC.B",
                    "KC.NO",
                    "KC.NO",
                    "KC.NO"
                ]
            ],
            [
                [
                    "KC.NO",
                    "KC.NO",
                    "KC.NO",
                    "KC.NO"
                ],
                [
                    "KC.NO",
                    "KC.NO",
                    "KC.NO",
                    "KC.NO"
                ],
                [
                    "KC.NO",
                    "KC.NO",
                    "KC.NO",
                    "KC.NO"
                ],
                [
                    "KC.NO",
                    "KC.NO",
                    "KC.NO",
                    "KC.NO"
                ],
                [
                    "KC.A",
                    "KC.NO",
                    "KC.NO",
                    "KC.NO"
                ]
            ],
            [
                [
                    "KC.NO",
                    "KC.NO",
                    "KC.NO",
                    "KC.NO"
                ],
                [
                    "KC.NO",
                    "KC.NO",
                    "KC.NO",
                    "KC.NO"
                ],
                [
                    "KC.NO",
                    "KC.NO",
                    "KC.NO",
                    "KC.NO"
                ],
                [
                    "KC.NO",
                    "KC.NO",
                    "KC.NO",
                    "KC.NO"
                ],
                [
                    "KC.A",
                    "KC.NO",
                    "KC.NO",
                    "KC.NO"
                ]
            ]
        ],
        "current_layer": 2
    },
    "macros": {
        "PASTE": [
            [
                "press",
                "KC.LCTL"
            ],
            [
                "tap",
                "KC.V"
            ],
            [
                "release",
                "KC.LCTL"
            ]
        ],
        "COPY": [
            [
                "press",
                "KC.LCTL"
            ],
            [
                "tap",
                "KC.C"
            ],
            [
                "release",
                "KC.LCTL"
            ]
        ],
        "STYLE1": [
            [
                "press",
                "KC.LCTL"
            ],
            [
                "press",
                "KC.LSFT"
            ],
            [
                "press",
                "KC.D"
            ],
            [
                "press",
                "KC.A"
            ],
            [
                "release",
                "KC.A"
            ],
            [
                "release",
                "KC.D"
            ],
            [
                "release",
                "KC.LSFT"
            ],
            [
                "release",
                "KC.LCTL"
            ]
        ],
        "PASS": [
            [
                "tap",
                "KC.ENT"
            ],
            [
                "delay",
                "100"
            ],
            [
                "tap",
                "KC.N8"
            ],
            [
                "tap",
                "KC.N0"
            ],
            [
                "tap",
                "KC.N1"
            ],
            [
                "tap",
                "KC.N2"
            ]
        ],
        "WINL": [
            [
                "press",
                "KC.LGUI"
            ],
            [
                "press",
                "KC.L"
            ],
            [
                "release",
                "KC.LGUI"
            ],
            [
                "release",
                "KC.L"
            ]
        ],
        "ALTAB": [
            [
                "press",
                "KC.LALT"
            ],
            [
                "tap",
                "KC.TAB"
            ],
            [
                "release",
                "KC.LALT"
            ]
        ],
        "CMD": [
            [
                "press",
                "KC.LGUI"
            ],
            [
                "tap",
                "KC.R"
            ],
            [
                "release",
                "KC.LGUI"
            ],
            [
                "delay",
                "10"
            ],
            [
                "text",
                "CMD.EXE"
            ],
            [
                "delay",
                "10"
            ],
            [
                "tap",
                "KC.ENT"
            ]
        ]
    },
    "rgb": {
        "enabled": true,
        "matrix": {
            "pixel_pin": "board.GP9",
            "brightness_limit": 0.5,
            "rgb_order": "GRB",
            "disable_auto_write": true,
            "num_underglow": 0,
            "default_key_color": "#FFFFFF",
            "default_underglow_color": "#000000",
            "key_colors": {
                "0": "#FF0000",
                "1": "#FF0000",
                "2": "#FF0000",
                "3": "#FF0000",
                "4": "#FF0000",
                "5": "#FF0000",
                "6": "#FF0000",
                "7": "#FF0000",
                "8": "#FF0000",
                "9": "#FF0000",
                "10": "#FF0000",
                "11": "#FF0000",
                "12": "#FF0000",
                "13": "#FF0000",
                "14": "#FF0000",
                "15": "#FF0000",
                "16": "#FCBAD3",
                "17": "#FCBAD3",
                "18": "#FCBAD3",
                "19": "#4ECDC4"
            },
            "layer_key_colors": {
                "0": {
                    "0": "#FF0000",
                    "1": "#FF0000",
                    "2": "#FF0000",
                    "3": "#FF0000",
                    "4": "#FF0000",
                    "5": "#FF0000",
                    "6": "#FF0000",
                    "7": "#FF0000",
                    "8": "#FF0000",
                    "9": "#FF0000",
                    "10": "#FF0000",
                    "11": "#FF0000",
                    "12": "#FF0000",
                    "13": "#FF0000",
                    "14": "#FF0000",
                    "15": "#FF0000",
                    "16": "#FCBAD3",
                    "17": "#FCBAD3",
                    "18": "#FCBAD3",
                    "19": "#4ECDC4"
                },
                "1": {
                    "0": "#AA55FF",
                    "1": "#AA55FF",
                    "2": "#AA55FF",
                    "3": "#AA55FF",
                    "4": "#AA55FF",
                    "5": "#AA55FF",
                    "6": "#AA55FF",
                    "7": "#AA55FF",
                    "8": "#AA55FF",
                    "9": "#AA55FF",
                    "10": "#AA55FF",
                    "11": "#AA55FF",
                    "12": "#AA55FF",
                    "13": "#AA55FF",
                    "14": "#AA55FF",
                    "15": "#AA55FF",
                    "16": "#FCBAD3",
                    "17": "#FCBAD3",
                    "18": "#FCBAD3",
                    "19": "#4ECDC4"
                },
                "2": {
                    "0": "#55FF00",
                    "1": "#55FF00",
                    "2": "#55FF00",
                    "3": "#55FF00",
                    "4": "#55FF00",
                    "5": "#55FF00",
                    "6": "#55FF00",
                    "7": "#55FF00",
                    "8": "#55FF00",
                    "9": "#55FF00",
                    "10": "#55FF00",
                    "11": "#55FF00",
                    "12": "#55FF00",
                    "13": "#55FF00",
                    "14": "#55FF00",
                    "15": "#55FF00",
                    "16": "#55FF00",
                    "17": "#55FF00",
                    "18": "#55FF00",
                    "19": "#55FF00"
                },
                "4": {
                    "0": "#00FFFF",
                    "1": "#00FFFF",
                    "2": "#00FFFF",
                    "3": "#00FFFF",
                    "4": "#00FFFF",
                    "5": "#00FFFF",
                    "6": "#00FFFF",
                    "7": "#00FFFF",
                    "8": "#00FFFF",
                    "9": "#00FFFF",
                    "10": "#00FFFF",
                    "11": "#00FFFF",
                    "12": "#00FFFF",
                    "13": "#00FFFF",
                    "14": "#00FFFF",
                    "15": "#00FFFF",
                    "16": "#00FFFF",
                    "17": "#00FFFF",
                    "18": "#00FFFF",
                    "19": "#00FFFF"
                },
                "5": {
                    "0": "#00007F",
                    "1": "#00007F",
                    "2": "#00007F",
                    "3": "#00007F",
                    "4": "#00007F",
                    "5": "#00007F",
                    "6": "#00007F",
                    "7": "#00007F",
                    "8": "#00007F",
                    "9": "#00007F",
                    "10": "#00007F",
                    "11": "#00007F",
                    "12": "#00007F",
                    "13": "#00007F",
                    "14": "#00007F",
                    "15": "#00007F",
                    "16": "#00007F",
                    "17": "#00007F",
                    "18": "#00007F",
                    "19": "#00007F"
                },
                "6": {
                    "0": "#555500",
                    "1": "#555500",
                    "2": "#555500",
                    "3": "#555500",
                    "4": "#555500",
                    "5": "#555500",
                    "6": "#555500",
                    "7": "#555500",
                    "8": "#555500",
                    "9": "#555500",
                    "10": "#555500",
                    "11": "#555500",
                    "12": "#555500",
                    "13": "#555500",
                    "14": "#555500",
                    "15": "#555500",
                    "16": "#555500",
                    "17": "#555500",
                    "18": "#555500",
                    "19": "#555500"
                },
                "7": {
                    "0": "#FF5500",
                    "1": "#FF5500",
                    "2": "#FF5500",
                    "3": "#FF5500",
                    "4": "#FF5500",
                    "5": "#FF5500",
                    "6": "#FF5500",
                    "7": "#FF5500",
                    "8": "#FF5500",
                    "9": "#FF5500",
                    "10": "#FF5500",
                    "11": "#FF5500",
                    "12": "#FF5500",
                    "13": "#FF5500",
                    "14": "#FF5500",
                    "15": "#FF5500",
                    "16": "#FF5500",
                    "17": "#FF5500",
                    "18": "#FF5500",
                    "19": "#FF5500"
                }
            },
            "underglow_colors": {}
        }
    },
    "extensions": {
        "encoder": {
            "enabled": true,
            "config_str": "# --- Rotary Encoder Configuration ---\nfrom kmk.modules.encoder import EncoderHandler\n\n# Encoder configuration with layer cycling using KC.TO()\nencoder_handler = EncoderHandler()\nencoder_handler.pins = ((board.GP10, board.GP11, board.GP14, False),)\n\n# Build encoder map for each layer\n# Each layer's encoder: (CCW action, CW action, Button press action)\nencoder_map = []\nfor i in range(3):\n    next_layer = (i + 1) % 3\n    prev_layer = (i - 1) % 3\n    # CCW=prev layer, CW=next layer, Press=layer 0\n    encoder_map.append(((KC.TO(prev_layer), KC.TO(next_layer), KC.TO(0)),))\n\nencoder_handler.map = encoder_map\nkeyboard.modules.append(encoder_handler)\n\n# Initialize layer cycler after keymap is defined\n# NOTE: Add this line AFTER keyboard.keymap = [...] in your code.py:\n# layer_cycler = LayerCycler(keyboard, num_layers=len(keyboard.keymap))"
        },
        "analogin": {
            "enabled": true,
            "config_str": "from analogio import AnalogIn as AnalogInPin\nimport time\n\n# Volume control via 10k sliding potentiometer on GP28\nclass VolumeSlider:\n    def __init__(self, keyboard, pin, poll_interval=0.05):\n        self.keyboard = keyboard\n        self.analog_pin = AnalogInPin(pin)\n        self.poll_interval = poll_interval\n        self.last_value = self.read_value()\n        self.last_poll = time.monotonic()\n        self.last_movement = time.monotonic()\n        self.threshold = 2000  # Minimum change to trigger volume adjustment (out of 65535)\n        self.step_size = 1  # Number of volume steps per change\n        self.idle_timeout = 2.0  # Seconds of no movement before requiring re-sync\n        self.synced = False  # Track if we've established direction after idle\n        \n    def read_value(self):\n        \"\"\"Read analog value (0-65535)\"\"\"\n        return self.analog_pin.value\n    \n    def during_bootup(self, keyboard):\n        \"\"\"Initialize at boot\"\"\"\n        self.last_value = self.read_value()\n        self.synced = False  # Require initial movement to establish baseline\n        return\n    \n    def before_matrix_scan(self, keyboard):\n        \"\"\"Check slider position before each matrix scan\"\"\"\n        return\n    \n    def after_matrix_scan(self, keyboard):\n        \"\"\"Check slider position after each matrix scan\"\"\"\n        current_time = time.monotonic()\n        \n        # Only poll at specified interval to avoid excessive checking\n        if current_time - self.last_poll < self.poll_interval:\n            return\n        \n        self.last_poll = current_time\n        current_value = self.read_value()\n        delta = current_value - self.last_value\n        \n        # Check if we've been idle too long (user may have adjusted volume elsewhere)\n        time_since_movement = current_time - self.last_movement\n        if time_since_movement > self.idle_timeout:\n            self.synced = False  # Need to re-sync on next movement\n        \n        # If slider moved significantly\n        if abs(delta) > self.threshold:\n            # If we're not synced (first movement after idle), just update position without sending\n            if not self.synced:\n                self.last_value = current_value\n                self.last_movement = current_time\n                self.synced = True\n                return\n            \n            # Normal operation: send volume commands based on direction\n            if delta > 0:\n                # Slider moved up (higher value) - increase volume\n                for _ in range(self.step_size):\n                    keyboard.hid_pending = True\n                    keyboard._send_hid()\n                    keyboard.add_key(KC.VOLU)\n                    keyboard._send_hid()\n                    keyboard.remove_key(KC.VOLU)\n                    keyboard._send_hid()\n            else:\n                # Slider moved down (lower value) - decrease volume\n                for _ in range(self.step_size):\n                    keyboard.hid_pending = True\n                    keyboard._send_hid()\n                    keyboard.add_key(KC.VOLD)\n                    keyboard._send_hid()\n                    keyboard.remove_key(KC.VOLD)\n                    keyboard._send_hid()\n            \n            self.last_value = current_value\n            self.last_movement = current_time\n    \n    def before_hid_send(self, keyboard):\n        \"\"\"Called before HID report is sent\"\"\"\n        return\n    \n    def after_hid_send(self, keyboard):\n        \"\"\"Called after HID report is sent\"\"\"\n        return\n    \n    def on_powersave_enable(self, keyboard):\n        \"\"\"Called when powersave is enabled\"\"\"\n        return\n    \n    def on_powersave_disable(self, keyboard):\n        \"\"\"Called when powersave is disabled\"\"\"\n        return\n\n# Create and register volume slider extension\nvolume_slider = VolumeSlider(keyboard, board.GP28, poll_interval=0.05)\nkeyboard.extensions.append(volume_slider)\n"
        },
        "display": {
            "enabled": true,
            "config_str": ""
        }
    }
}